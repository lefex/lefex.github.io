(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{642:function(e,t,r){"use strict";r.r(t);var o=r(48),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"如何开发一款在线的ide"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何开发一款在线的ide"}},[e._v("#")]),e._v(" 如何开发一款在线的IDE")]),e._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),r("p",[e._v("https://github.com/conwnet/github1s/blob/master/docs/guide.md")]),e._v(" "),r("h2",{attrs:{id:"github1s"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#github1s"}},[e._v("#")]),e._v(" github1s")]),e._v(" "),r("h1",{attrs:{id:"how-it-works"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[e._v("#")]),e._v(" How it works")]),e._v(" "),r("p",[e._v("Github1s is based on "),r("a",{attrs:{href:"https://github.com/microsoft/vscode/tree/1.52.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("VS Code 1.52.1"),r("OutboundLink")],1),e._v(" now. VS Code can be built for a browser version officially. I also used the code and got inspired by "),r("a",{attrs:{href:"https://github.com/cdr/code-server",target:"_blank",rel:"noopener noreferrer"}},[e._v("Code Server"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("Thanks to the very powerful and flexible extensibility of VS Code, we can easily implement a VS Code extension that provides the custom File IO ability using "),r("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api#FileSystemProvider",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileSystemProvider API"),r("OutboundLink")],1),e._v(". There is an official demo named "),r("a",{attrs:{href:"https://github.com/microsoft/vscode-web-playground",target:"_blank",rel:"noopener noreferrer"}},[e._v("vscode-web-playground"),r("OutboundLink")],1),e._v(" which shows how it is used.")]),e._v(" "),r("p",[e._v("On the other hand, GitHub provides the powerful "),r("a",{attrs:{href:"https://docs.github.com/en/rest",target:"_blank",rel:"noopener noreferrer"}},[e._v("REST API"),r("OutboundLink")],1),e._v(" that can be used for a variety of tasks which includes reading directories and files for sure.")]),e._v(" "),r("p",[e._v("According to the above, obviously, the core concept of GitHub1s is to implement a VS Code Extension (includes FileSystemProvider) using GitHub REST API.")]),e._v(" "),r("p",[r("em",[e._v("We may switch to the GitHub GraphQL API for more friendly user experience in the future, thanks to @xcv58 and @kanhegaonkarsaurabh. See details at "),r("a",{attrs:{href:"https://github.com/conwnet/github1s/issues/12",target:"_blank",rel:"noopener noreferrer"}},[e._v("Issue 12"),r("OutboundLink")],1),e._v(".")])]),e._v(" "),r("p",[r("s",[e._v("GitHub1s is a purely static web app (because it really doesn't need a backend service, does it?). So we just deploy it on "),r("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub Pages"),r("OutboundLink")],1),e._v(" now (the "),r("code",[e._v("gh-pages")]),e._v(" branch of this repository), and it is free. The service of GitHub1s could be reliable (GitHub is very reliable) because nobody needs to pay the web hosting bills.")])]),e._v(" "),r("p",[e._v("We deploy GitHub1s on "),r("a",{attrs:{href:"https://vercel.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vercel"),r("OutboundLink")],1),e._v(" now for minimize delays in loading and better developer experience. Thanks for the wonderful service provide by Vercel.")]),e._v(" "),r("h1",{attrs:{id:"rate-limit"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rate-limit"}},[e._v("#")]),e._v(" Rate Limit")]),e._v(" "),r("p",[e._v("Another thing that needs attention is "),r("a",{attrs:{href:"https://docs.github.com/en/rest/reference/rate-limit",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rate Limit"),r("OutboundLink")],1),e._v(":")]),e._v(" "),r("blockquote",[r("p",[e._v("For unauthenticated requests, the rate limit allows for up to 60 requests per hour. Unauthenticated requests are associated with the originating IP address, and not the user making requests.")])]),e._v(" "),r("blockquote",[r("p",[e._v("For API requests using Basic Authentication or OAuth, you can make up to 5,000 requests per hour.")])]),e._v(" "),r("p",[e._v("So, if you meet some problems when you use GitHub1s, even if you are using newer browsers, you could try to set a "),r("a",{attrs:{href:"https://docs.github.com/en/rest/overview/resources-in-the-rest-api#oauth2-token-sent-in-a-header",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub OAuth Token"),r("OutboundLink")],1),e._v(". Don't worry, we cannot see your token. It is only stored in your browser "),r("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"}},[e._v("IndexedDB"),r("OutboundLink")],1),e._v(" with "),r("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api#ExtensionContext",target:"_blank",rel:"noopener noreferrer"}},[e._v("VS Code Extension globalState API"),r("OutboundLink")],1),e._v(" (Actually we don't have a server, do we?).")]),e._v(" "),r("p",[e._v("But this does not mean the token is absolutely safe, "),r("strong",[e._v("don't forget to clean it while you are using a device that doesn't belong to you")]),e._v(".")]),e._v(" "),r("h1",{attrs:{id:"development"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#development"}},[e._v("#")]),e._v(" Development")]),e._v(" "),r("p",[e._v("As you see, running GitHub1s locally is not difficult. After cloning the repository, just run these commands:")]),e._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("watch")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# or yarn build, it may take minutes, wait please")]),e._v("\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("Then, there will be a new directory named "),r("code",[e._v("dist")]),e._v(" generated in the project root. You can run "),r("code",[e._v("yarn serve")]),e._v(" in another shell, and it will create a static file server for the "),r("code",[e._v("dist")]),e._v(" directory.")]),e._v(" "),r("p",[e._v("Now you can visit http://localhost:5000 in the browser. If you get a 404 error for some static files, please wait a minute for the building to complete.")]),e._v(" "),r("h2",{attrs:{id:"watch-mode"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#watch-mode"}},[e._v("#")]),e._v(" Watch Mode")]),e._v(" "),r("p",[e._v("What happens after you run "),r("code",[e._v("yarn watch")]),e._v("?")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("Copy some necessary resources ("),r("code",[e._v("index.html")]),e._v(", extensions config, libraries, etc.) to the "),r("code",[e._v("dist")]),e._v(" directory.")])]),e._v(" "),r("li",[r("p",[e._v("Go to "),r("code",[e._v("lib/vscode")]),e._v(" and run "),r("code",[e._v("yarn gulp compile-web")]),e._v(" to build the necessary extensions, then copy it to the "),r("code",[e._v("dist/extensions")]),e._v(" directory.")])]),e._v(" "),r("li",[r("p",[e._v("Go to "),r("code",[e._v("lib/vscode")]),e._v(" and run "),r("code",[e._v("yarn watch")]),e._v(" (the native watch of vscode), it will trigger a new build if something in it has been changed.")])]),e._v(" "),r("li",[r("p",[e._v("Watch the "),r("code",[e._v("src")]),e._v(" directory, merge it in to "),r("code",[e._v("lib/vscode/src")]),e._v(" if something in it has been changed. (When a new file is merged into "),r("code",[e._v("lib/vscode/src")]),e._v(", it will trigger the watcher that is described in Step 3)")])]),e._v(" "),r("li",[r("p",[e._v("Go to "),r("code",[e._v("extensions/github1s")]),e._v(" and run "),r("code",[e._v("yarn watch")]),e._v(", it will trigger a new build if something has been changed.")])]),e._v(" "),r("li",[r("p",[e._v("Watch the "),r("code",[e._v("extensions")]),e._v(" directory and the "),r("code",[e._v("lib/vscode/out")]),e._v(" directory, merge them into the "),r("code",[e._v("dist")]),e._v(" directory if something changed in them.")])])]),e._v(" "),r("p",[e._v("Note that since we have modified the source code of VS Code, it may get into trouble when merging a newer version VS Code.")]),e._v(" "),r("p",[e._v("It is a little laborious to complete the watch process, but I didn't think of a better solution.")]),e._v(" "),r("h2",{attrs:{id:"build-mode"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build-mode"}},[e._v("#")]),e._v(" Build mode")]),e._v(" "),r("p",[e._v("Put simply, we build the necessary code and do a minify. The minify script is modified from "),r("a",{attrs:{href:"https://github.com/cdr/code-server",target:"_blank",rel:"noopener noreferrer"}},[e._v("Code Server"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"directory-structure"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#directory-structure"}},[e._v("#")]),e._v(" Directory Structure")]),e._v(" "),r("ul",[r("li",[r("p",[r("code",[e._v("extensions")]),e._v(" - custom VS Code extensions that don't come with VS Code natively.")])]),e._v(" "),r("li",[r("p",[r("code",[e._v("src")]),e._v(" - the code in here will be patched into VS Code source.")])]),e._v(" "),r("li",[r("p",[r("code",[e._v("scripts")]),e._v(" - some scripts for build, watch, package, etc.")])]),e._v(" "),r("li",[r("p",[r("code",[e._v("resources")]),e._v(" - some resource files such as templates, pictures, configuration files, etc.")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);